**search模块：**

跳转到search模块有两种途径，点击三级联动(query)或者搜索框搜索关键字(params)。无论从点击哪个跳转过来的，都会先进行合并路由传参之后再传递到搜索组件

**搜索组件包括** 面包屑动态(可删除) 子组件(商品参数：包括品牌和售卖属性)  商品展示部分

**搜索组件中包括**  **searchParams搜索参数对象**：三级分类id   *分类名字*   *关键字*    *排序 初始状态综合|降序*    *分页器：当前第几页*  *每一个展示数据个数*    *平台售卖属性操作带的参数*     *品牌*

在**beforeMount**钩子中会进行对 searchParams和query和params的**合并**(Object.assign)

在**mounted**钩子中会派发action去请求数据携带这个参数对象请求数据，动态渲染界面，

**面包屑区域**

​	包括searchParams中的 三级分类名字 关键字 手牌属性 品牌名子   其中 分类名字和关键字是界面跳转就带过来的，会直接渲染到页面上，searchParams中的品牌名字和商品属性默认是空的，需要触发商品参数子组件的自定义事件来传回选择的品牌和商品属性 同时动态渲染到页面 也会重新向后台请求数据

​	整个面包屑部分 除了通过路由传递的以外其余参数 无论添加或者删除都会再对应的方法中对Listparams参数做调整，同时派发action。

​	而**路由的删除**是通过重新跳转路由，自己跳转自己。同时会去掉删掉的路由参数，而**再次点击分类或者关键字**时，路由会重新跳转，和从其他组件点击分类跳转过来是一样的

**在搜索模块中点击分类或者搜索关键字页面不会发生变化**

首先路由的再此跳转，searchParams分类名字和分类id的修改，我们设计的思路是searchParams中除了经过路由跳转得来的参数以外，其他参数在被改变时候都会去派发action获取新数据，而通过路由跳转得来的参数是在beforeMounted钩子中对searchParams进行合并，并且在mounted中派发action  但是当前组件是一直挂载的 上面两个钩子不会执行，所以这个时候要监听路由的变化。一旦我们点击了分类或者搜索关键字，就要合并对象同时派发actions

**删除面包屑部分(路由跳转参数)** 

​	点击删除x 如果是分类名字或者是关键字重新跳转路由之前要把路由对应的参数部分清空，这部分如果不删除的话可以正常返回数据并渲染 但是如果再次搜索关键字或点击分分类会带着之前的路由参数信息(因为跳转之前整合参数)，删除后会重新整合，同时自己跳转自己。总之无论点击(修改)还是删除 都会重新跳转路由 并通过监视$route的方式来进行 整合ListParams派发action   同时通过全局事件总线通知兄弟组件 把搜索框中的字清除

**综合和价格样式控制**

1 2 分别代表 价格和综合哪个高亮，desc代表降序，asc代表升序 如果当前点击的就是处于高亮状态的，flag不需要改变(1 2部分) 价格或者综合取反 反之电机的不是高亮部分，flag为对应的1或者2表示高亮 默认desc降序

**undefined.语法报错**

在组件的mounted钩子中派发action去异步获取数据存储到仓库中，但是在computed中要拿到仓库中中的数据，但此时该值为undefined，用对象的.语法会报undefined的错误。同样道理，在父组件往子组件传递信息，由于数据是异步获取的，子组件拿到也是空数据，都要用||符号，至少返回一个空对象或者数组。

**购物车**

每次点击购物车记录的删除，增加/减少，是否选中都会向服务器发送请求。同时会重新请求购物车数据

每条记录都有**isChecked**选项，1代表选中，0代表没选中，复选框的动态属性绑定isChecked展示初始状态。点击复选框后会根据当前状态向服务器发送请求(参数包括记录id，和实际选中状态，0/1)来修改该记录对象的ischecked属性

**全部选择复选框**会根据计算属性计算出当前所有记录的选中状态，自动的进行选中或未选中的改变。如果主动点击该框，则会根据当前选中的实际情况向后台发送请求(所有的购物车记录对象的ischecked属性都会进行变化)，并重新请求数据。

**订单组件**

在购物车点击支付后跳转到该组件，mounted钩子中发请求获取订单中商品的信息和收件人信息，进行页面渲染，**点击支付**跳转到支付组件之前，结合二者获得订单编号，**将订单编号路由传参传递到支付组件**

**支付组件**

在钩子中根据订单编号获得支付信息，

**点击支付时**利用QRcode插件根据支付信息中的字符串生成二维码地址，弹出层弹出二维码，同时会开启定时器不断向后台请求支付状态码如果支付状态码为200证明支付成功直接跳转，用户也可以点击关闭弹罩层直接取消支付(清空定时器),用户也可以点击我已支付，此时判断支付状态码，如果已经设置成200了就证明支付成功了关闭弹罩层并跳转成功组件，否则该按钮点不动。

**轮播图**

可视区盒子大小和图片匹配，有连续好几个装图片的盒子定位在可视区盒子上

num变量对应每个盒子(比如三张图片：0，1，2) 但是要在尾部插入第一张图片的盒子(克隆第一个盒子)  所以num变量对应的值为(0,1,2,3)

鼠标放到可视区 left right按钮显示 清空定时器timer ，鼠标移开可视区开启定时器赋值给timer,两个按钮隐藏   定时器setInterval都是在调用 right.click()  也就是主动调用right按钮点击事件 滚动图片。

![image-20220318183317693](C:/Users/86137/AppData/Roaming/Typora/typora-user-images/image-20220318183317693.png)

点击right  num++  

![image-20220318183243967](C:/Users/86137/AppData/Roaming/Typora/typora-user-images/image-20220318183243967.png)

![image-20220318183345789](C:/Users/86137/AppData/Roaming/Typora/typora-user-images/image-20220318183345789.png)
